---
import { getCollection, render } from "astro:content";
import { Image } from "astro:assets";
import { LOCALES, type Lang } from "@/i18n";
import Layout from "@/layouts/Base.astro";

export async function getStaticPaths() {
  const games = await getCollection("game");
  const lang = LOCALES;

  const result= Object.keys(lang).map((slang) => {
      return games.map((game) => {
        const lang=slang;
        const id=game.data.slug;
        return { params: { lang, id } };
      });
  });
  return result.flat();
}

Astro.params.id = Astro.params.id;
const { lang } = Astro.params;
const game = await getCollection("game").then((games) =>
  games.find((game) => game.data.slug === Astro.params.id)
)as any;
---

<Layout>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold">  {game.data.title}</h1>
  </div>

</Layout>